"use strict";

var _nodeFetch = _interopRequireDefault(require("node-fetch"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

require("dotenv").config();

const __URL = process.env.JSONBIN_DB;
module.exports = {
  Query: {
    getAllFilms: () => {
      let data;

      const getData = async () => {
        const res = await (0, _nodeFetch.default)(__URL);
        data = await res.json();
      };

      return getData().then(() => {
        return data.films;
      });
    },
    getAllPersons: () => {
      let data;

      const getData = async () => {
        const res = await (0, _nodeFetch.default)(__URL);
        data = await res.json();
      };

      return getData().then(() => {
        return data.persons;
      });
    },
    getProducers: () => {
      let data;

      const getData = async () => {
        const res = await (0, _nodeFetch.default)(__URL);
        data = await res.json();
      };

      return getData().then(() => {
        return data.persons.filter(p => {
          return p.type === "producer";
        });
      }); //return persons.filter( (p) => { return p.type === "producer" } )
    },
    getActers: () => {
      let data;

      const getData = async () => {
        const res = await (0, _nodeFetch.default)(__URL);
        data = await res.json();
      };

      return getData().then(() => {
        return data.persons.filter(p => {
          return p.type === "acter";
        });
      });
    },
    getPerson: (_, params) => {
      let data;

      const getData = async () => {
        const res = await (0, _nodeFetch.default)(__URL);
        data = await res.json();
      };

      return getData().then(() => {
        return data.persons.find(({
          id
        }) => {
          return id === params.id;
        });
      });
    },
    getFilm: (_, params) => {
      let data;

      const getData = async () => {
        const res = await (0, _nodeFetch.default)(__URL);
        data = await res.json();
      };

      return getData().then(() => {
        return data.films.find(({
          id
        }) => {
          return id === params.id;
        });
      });
    },
    getAllTimes: () => {
      let data;

      const getData = async () => {
        const res = await (0, _nodeFetch.default)(__URL);
        data = await res.json();
      };

      return getData().then(() => {
        return data.times;
      });
    },
    getTime: (_, params) => {
      let data;

      const getData = async () => {
        const res = await (0, _nodeFetch.default)(__URL);
        data = await res.json();
      };

      return getData().then(() => {
        return data.times.find(({
          id
        }) => {
          return id === params.id;
        });
      });
    }
  }
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9ncmFwaHFsL3Jlc29sdmVycy5qcyJdLCJuYW1lcyI6WyJyZXF1aXJlIiwiY29uZmlnIiwiX19VUkwiLCJwcm9jZXNzIiwiZW52IiwiSlNPTkJJTl9EQiIsIm1vZHVsZSIsImV4cG9ydHMiLCJRdWVyeSIsImdldEFsbEZpbG1zIiwiZGF0YSIsImdldERhdGEiLCJyZXMiLCJqc29uIiwidGhlbiIsImZpbG1zIiwiZ2V0QWxsUGVyc29ucyIsInBlcnNvbnMiLCJnZXRQcm9kdWNlcnMiLCJmaWx0ZXIiLCJwIiwidHlwZSIsImdldEFjdGVycyIsImdldFBlcnNvbiIsIl8iLCJwYXJhbXMiLCJmaW5kIiwiaWQiLCJnZXRGaWxtIiwiZ2V0QWxsVGltZXMiLCJ0aW1lcyIsImdldFRpbWUiXSwibWFwcGluZ3MiOiI7O0FBRUE7Ozs7QUFGQUEsT0FBTyxDQUFDLFFBQUQsQ0FBUCxDQUFrQkMsTUFBbEI7O0FBSUEsTUFBTUMsS0FBSyxHQUFHQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsVUFBMUI7QUFFQUMsTUFBTSxDQUFDQyxPQUFQLEdBQWlCO0FBQ2JDLEVBQUFBLEtBQUssRUFBRTtBQUNIQyxJQUFBQSxXQUFXLEVBQUUsTUFBTTtBQUVmLFVBQUlDLElBQUo7O0FBRUEsWUFBTUMsT0FBTyxHQUFHLFlBQVk7QUFDeEIsY0FBTUMsR0FBRyxHQUFHLE1BQU0sd0JBQU1WLEtBQU4sQ0FBbEI7QUFDQVEsUUFBQUEsSUFBSSxHQUFHLE1BQU1FLEdBQUcsQ0FBQ0MsSUFBSixFQUFiO0FBQ0gsT0FIRDs7QUFLQSxhQUFPRixPQUFPLEdBQUdHLElBQVYsQ0FBZ0IsTUFBTTtBQUFFLGVBQU9KLElBQUksQ0FBQ0ssS0FBWjtBQUFtQixPQUEzQyxDQUFQO0FBQ0gsS0FYRTtBQWFIQyxJQUFBQSxhQUFhLEVBQUUsTUFBTTtBQUVqQixVQUFJTixJQUFKOztBQUVBLFlBQU1DLE9BQU8sR0FBRyxZQUFZO0FBQ3hCLGNBQU1DLEdBQUcsR0FBRyxNQUFNLHdCQUFNVixLQUFO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UUFBQUEsSUFBSSxHQUFHLE1BQU1FLEdBQUcsQ0FBQ0MsSUFBSixFQUFiO0FBQ0gsT0FIRDs7QUFLQSxhQUFPRixPQUFPLEdBQUdHLElBQVYsQ0FBZ0IsTUFBTTtBQUFFLGVBQU9KLElBQUksQ0FBQ29CLEtBQVo7QUFBbUIsT0FBM0MsQ0FBUDtBQUNILEtBckZFO0FBdUZIQyxJQUFBQSxPQUFPLEVBQUUsQ0FBRVAsQ0FBRixFQUFLQyxNQUFMLEtBQWlCO0FBRXRCLFVBQUlmLElBQUo7O0FBRUEsWUFBTUMsT0FBTyxHQUFHLFlBQVk7QUFDeEIsY0FBTUMsR0FBRyxHQUFHLE1BQU0sd0JBQU1WLEtBQU4sQ0FBbEI7QUFDQVEsUUFBQUEsSUFBSSxHQUFHLE1BQU1FLEdBQUcsQ0FBQ0MsSUFBSixFQUFiO0FBQ0gsT0FIRDs7QUFLQSxhQUFPRixPQUFPLEdBQUdHLElBQVYsQ0FBZ0IsTUFBTTtBQUFFLGVBQU9KLElBQUksQ0FBQ29CLEtBQUwsQ0FBV0osSUFBWCxDQUFpQixDQUFDO0FBQUVDLFVBQUFBO0FBQUYsU0FBRCxLQUFZO0FBQUUsaUJBQU9BLEVBQUUsS0FBS0YsTUFBTSxDQUFDRSxFQUFyQjtBQUF5QixTQUF4RCxDQUFQO0FBQW1FLE9BQTNGLENBQVA7QUFDSDtBQWpHRTtBQURNLENBQWpCIiwic291cmNlc0NvbnRlbnQiOlsicmVxdWlyZShcImRvdGVudlwiKS5jb25maWcoKTtcclxuXHJcbmltcG9ydCBmZXRjaCBmcm9tIFwibm9kZS1mZXRjaFwiO1xyXG5cclxuY29uc3QgX19VUkwgPSBwcm9jZXNzLmVudi5KU09OQklOX0RCO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSB7XHJcbiAgICBRdWVyeToge1xyXG4gICAgICAgIGdldEFsbEZpbG1zOiAoKSA9PiB7XHJcblxyXG4gICAgICAgICAgICBsZXQgZGF0YVxyXG5cclxuICAgICAgICAgICAgY29uc3QgZ2V0RGF0YSA9IGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKF9fVVJMKVxyXG4gICAgICAgICAgICAgICAgZGF0YSA9IGF3YWl0IHJlcy5qc29uKClcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGdldERhdGEoKS50aGVuKCAoKSA9PiB7IHJldHVybiBkYXRhLmZpbG1zIH0gKVxyXG4gICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICBnZXRBbGxQZXJzb25zOiAoKSA9PiB7XHJcblxyXG4gICAgICAgICAgICBsZXQgZGF0YVxyXG5cclxuICAgICAgICAgICAgY29uc3QgZ2V0RGF0YSA9IGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKF9fVVJMKVxyXG4gICAgICAgICAgICAgICAgZGF0YSA9IGF3YWl0IHJlcy5qc29uKClcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGdldERhdGEoKS50aGVuKCAoKSA9PiB7IHJldHVybiBkYXRhLnBlcnNvbnMgfSApXHJcbiAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgIGdldFByb2R1Y2VyczogKCkgPT4ge1xyXG5cclxuICAgICAgICAgICAgbGV0IGRhdGFcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGdldERhdGEgPSBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChfX1VSTClcclxuICAgICAgICAgICAgICAgIGRhdGEgPSBhd2FpdCByZXMuanNvbigpXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBnZXREYXRhKCkudGhlbiggKCkgPT4geyByZXR1cm4gZGF0YS5wZXJzb25zLmZpbHRlciggKHApID0+IHsgcmV0dXJuIHAudHlwZSA9PT0gXCJwcm9kdWNlclwiIH0gKSB9IClcclxuXHJcbiAgICAgICAgICAgIC8vcmV0dXJuIHBlcnNvbnMuZmlsdGVyKCAocCkgPT4geyByZXR1cm4gcC50eXBlID09PSBcInByb2R1Y2VyXCIgfSApXHJcbiAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgIGdldEFjdGVyczogKCkgPT4ge1xyXG5cclxuICAgICAgICAgICAgbGV0IGRhdGFcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGdldERhdGEgPSBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChfX1VSTClcclxuICAgICAgICAgICAgICAgIGRhdGEgPSBhd2FpdCByZXMuanNvbigpXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBnZXREYXRhKCkudGhlbiggKCkgPT4geyByZXR1cm4gZGF0YS5wZXJzb25zLmZpbHRlciggKHApID0+IHsgcmV0dXJuIHAudHlwZSA9PT0gXCJhY3RlclwiIH0gKSB9IClcclxuICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgZ2V0UGVyc29uOiAoIF8sIHBhcmFtcyApID0+IHtcclxuXHJcbiAgICAgICAgICAgIGxldCBkYXRhXHJcblxyXG4gICAgICAgICAgICBjb25zdCBnZXREYXRhID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goX19VUkwpXHJcbiAgICAgICAgICAgICAgICBkYXRhID0gYXdhaXQgcmVzLmpzb24oKVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZ2V0RGF0YSgpLnRoZW4oICgpID0+IHsgcmV0dXJuIGRhdGEucGVyc29ucy5maW5kKCAoeyBpZCB9KSA9PiB7IHJldHVybiBpZCA9PT0gcGFyYW1zLmlkIH0gKSB9IClcclxuICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgZ2V0RmlsbTogKCBfLCBwYXJhbXMgKSA9PiB7XHJcblxyXG4gICAgICAgICAgICBsZXQgZGF0YVxyXG5cclxuICAgICAgICAgICAgY29uc3QgZ2V0RGF0YSA9IGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKF9fVVJMKVxyXG4gICAgICAgICAgICAgICAgZGF0YSA9IGF3YWl0IHJlcy5qc29uKClcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGdldERhdGEoKS50aGVuKCAoKSA9PiB7IHJldHVybiBkYXRhLmZpbG1zLmZpbmQoICh7IGlkIH0pID0+IHsgcmV0dXJuIGlkID09PSBwYXJhbXMuaWQgfSApIH0gKVxyXG4gICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICBnZXRBbGxUaW1lczogKCkgPT4ge1xyXG5cclxuICAgICAgICAgICAgbGV0IGRhdGFcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGdldERhdGEgPSBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChfX1VSTClcclxuICAgICAgICAgICAgICAgIGRhdGEgPSBhd2FpdCByZXMuanNvbigpXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBnZXREYXRhKCkudGhlbiggKCkgPT4geyByZXR1cm4gZGF0YS50aW1lcyB9IClcclxuICAgICAgICB9LFxyXG4gICAgICAgIFxyXG4gICAgICAgIGdldFRpbWU6ICggXywgcGFyYW1zICkgPT4ge1xyXG5cclxuICAgICAgICAgICAgbGV0IGRhdGFcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGdldERhdGEgPSBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChfX1VSTClcclxuICAgICAgICAgICAgICAgIGRhdGEgPSBhd2FpdCByZXMuanNvbigpXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBnZXREYXRhKCkudGhlbiggKCkgPT4geyByZXR1cm4gZGF0YS50aW1lcy5maW5kKCAoeyBpZCB9KSA9PiB7IHJldHVybiBpZCA9PT0gcGFyYW1zLmlkIH0gKSB9IClcclxuICAgICAgICB9XHJcbiAgICB9IFxyXG59Il19