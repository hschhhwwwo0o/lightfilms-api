"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _ = _interopRequireDefault(require("."));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _default = (child, sort, parametr) => {
  if (sort === "all" || sort === undefined) {
    let data;

    const getData = async () => {
      await _.default.ref().child(child).get().then(s => {
        if (s.exists()) {
          data = s.val();
        }
      }).catch(error => {
        console.error(error);
      });
    };

    return getData().then(() => data);
  } else if (sort === "filter") {
    let data;

    const getData = async () => {
      await _.default.ref().child(child).get().then(s => {
        if (s.exists()) {
          data = s.val();
        }
      }).catch(error => {
        console.error(error);
      });
    };

    return getData().then(() => {
      return data.filter(p => {
        return p.type === parametr;
      });
    });
  } else if (sort === "find") {
    let data;

    const getData = async () => {
      await _.default.ref().child("times").get().then(s => {
        if (s.exists()) {
          data = s.val();
        }
      }).catch(error => {
        console.error(error);
      });
    };

    return getData().then(() => {
      return data.find(({
        id
      }) => {
        return id === parametr;
      });
    });
  }
};

exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9maXJlYmFzZS9maXJlYmFzZS5yZXF1ZXN0LmpzIl0sIm5hbWVzIjpbImNoaWxkIiwic29ydCIsInBhcmFtZXRyIiwidW5kZWZpbmVkIiwiZGF0YSIsImdldERhdGEiLCJkYXRhYmFzZSIsInJlZiIsImdldCIsInRoZW4iLCJzIiwiZXhpc3RzIiwidmFsIiwiY2F0Y2giLCJlcnJvciIsImNvbnNvbGUiLCJmaWx0ZXIiLCJwIiwidHlwZSIsImZpbmQiLCJpZCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOzs7O2VBRWUsQ0FBQ0EsS0FBRCxFQUFRQyxJQUFSLEVBQWNDLFFBQWQsS0FBMkI7QUFDdEMsTUFBR0QsSUFBSSxLQUFLLEtBQVQsSUFBa0JBLElBQUksS0FBS0UsU0FBOUIsRUFBeUM7QUFDckMsUUFBSUMsSUFBSjs7QUFDQSxVQUFNQyxPQUFPLEdBQUcsWUFBWTtBQUN4QixZQUFNQyxVQUFTQyxHQUFULEdBQWVQLEtBQWYsQ0FBcUJBLEtBQXJCLEVBQTRCUSxHQUE1QixHQUNMQyxJQURLLENBQ0NDLENBQUQsSUFBTztBQUFFLFlBQUtBLENBQUMsQ0FBQ0MsTUFBRixFQUFMLEVBQWtCO0FBQUVQLFVBQUFBLElBQUksR0FBR00sQ0FBQyxDQUFDRSxHQUFGLEVBQVA7QUFBZ0I7QUFBQyxPQUQ5QyxFQUVMQyxLQUZLLENBRUVDLEtBQUQsSUFBVztBQUFFQyxRQUFBQSxPQUFPLENBQUNELEtBQVIsQ0FBY0EsS0FBZDtBQUFzQixPQUZwQyxDQUFOO0FBR0gsS0FKRDs7QUFNQSxXQUFPVCxPQUFPLEdBQUdJLElBQVYsQ0FBZ0IsTUFBTUwsSUFBdEIsQ0FBUDtBQUNILEdBVEQsTUFTTyxJQUFHSCxJQUFJLEtBQUssUUFBWixFQUFzQjtBQUN6QixRQUFJRyxJQUFKOztBQUNBLFVBQU1DLE9BQU8sR0FBRyxZQUFZO0FBQ3hCLFlBQU1DLFVBQVNDLEdBQVQsR0FDTFAsS0FESyxDQUNDQSxLQURELEVBQ1FRLEdBRFIsR0FFTEMsSUFGSyxDQUVDQyxDQUFELElBQU87QUFBRSxZQUFLQSxDQUFDLENBQUNDLE1BQUYsRUFBTCxFQUFrQjtBQUFFUCxVQUFBQSxJQUFJLEdBQUdNLENBQUMsQ0FBQ0UsR0FBRixFQUFQO0FBQWdCO0FBQUMsT0FGOUMsRUFHTEMsS0FISyxDQUdFQyxLQUFELElBQVc7QUFBRUMsUUFBQUEsT0FBTyxDQUFDRCxLQUFSLENBQWNBLEtBQWQ7QUFBc0IsT0FIcEMsQ0FBTjtBQUlILEtBTEQ7O0FBT0EsV0FBT1QsT0FBTyxHQUFHSSxJQUFWLENBQWUsTUFBTTtBQUN4QixhQUFPTCxJQUFJLENBQUNZLE1BQUwsQ0FBYUMsQ0FBRCxJQUFPO0FBQUUsZUFBT0EsQ0FBQyxDQUFDQyxJQUFGLEtBQVdoQixRQUFsQjtBQUE0QixPQUFqRCxDQUFQO0FBQ0gsS0FGTSxDQUFQO0FBR0gsR0FaTSxNQVlBLElBQUdELElBQUksS0FBSyxNQUFaLEVBQW9CO0FBQ3ZCLFFBQUlHLElBQUo7O0FBQ0EsVUFBTUMsT0FBTyxHQUFHLFlBQVk7QUFDeEIsWUFBTUMsVUFBU0MsR0FBVCxHQUNMUCxLQURLLENBQ0MsT0FERCxFQUNVUSxHQURWLEdBRUxDLElBRkssQ0FFQ0MsQ0FBRCxJQUFPO0FBQUUsWUFBSUEsQ0FBQyxDQUFDQyxNQUFGLEVBQUosRUFBZ0I7QUFBRVAsVUFBQUEsSUFBSSxHQUFHTSxDQUFDLENBQUNFLEdBQUYsRUFBUDtBQUFnQjtBQUFDLE9BRjVDLEVBR0xDLEtBSEssQ0FHRUMsS0FBRCxJQUFXO0FBQUVDLFFBQUFBLE9BQU8sQ0FBQ0QsS0FBUixDQUFjQSxLQUFkO0FBQXNCLE9BSHBDLENBQU47QUFJSCxLQUxEOztBQU9BLFdBQU9ULE9BQU8sR0FBR0ksSUFBVixDQUFlLE1BQU07QUFDeEIsYUFBT0wsSUFBSSxDQUFDZSxJQUFMLENBQVcsQ0FBQztBQUFFQyxRQUFBQTtBQUFGLE9BQUQsS0FBWTtBQUFFLGVBQU9BLEVBQUUsS0FBS2xCLFFBQWQ7QUFBdUIsT0FBaEQsQ0FBUDtBQUNILEtBRk0sQ0FBUDtBQUdIO0FBQ0osQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBkYXRhYmFzZSBmcm9tIFwiLlwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgKGNoaWxkLCBzb3J0LCBwYXJhbWV0cikgPT4ge1xyXG4gICAgaWYoc29ydCA9PT0gXCJhbGxcIiB8fCBzb3J0ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBsZXQgZGF0YTtcclxuICAgICAgICBjb25zdCBnZXREYXRhID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBhd2FpdCBkYXRhYmFzZS5yZWYoKS5jaGlsZChjaGlsZCkuZ2V0KClcclxuICAgICAgICAgICAgLnRoZW4oKHMpID0+IHsgaWYgKCBzLmV4aXN0cygpICkgeyBkYXRhID0gcy52YWwoKSB9fSlcclxuICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4geyBjb25zb2xlLmVycm9yKGVycm9yKSB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm4gZ2V0RGF0YSgpLnRoZW4oICgpID0+IGRhdGEgKTtcclxuICAgIH0gZWxzZSBpZihzb3J0ID09PSBcImZpbHRlclwiKSB7XHJcbiAgICAgICAgbGV0IGRhdGE7XHJcbiAgICAgICAgY29uc3QgZ2V0RGF0YSA9IGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgYXdhaXQgZGF0YWJhc2UucmVmKClcclxuICAgICAgICAgICAgLmNoaWxkKGNoaWxkKS5nZXQoKVxyXG4gICAgICAgICAgICAudGhlbigocykgPT4geyBpZiAoIHMuZXhpc3RzKCkgKSB7IGRhdGEgPSBzLnZhbCgpIH19KVxyXG4gICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7IGNvbnNvbGUuZXJyb3IoZXJyb3IpIH0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiBnZXREYXRhKCkudGhlbigoKSA9PiB7IFxyXG4gICAgICAgICAgICByZXR1cm4gZGF0YS5maWx0ZXIoKHApID0+IHsgcmV0dXJuIHAudHlwZSA9PT0gcGFyYW1ldHIgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9IGVsc2UgaWYoc29ydCA9PT0gXCJmaW5kXCIpIHtcclxuICAgICAgICBsZXQgZGF0YTtcclxuICAgICAgICBjb25zdCBnZXREYXRhID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBhd2FpdCBkYXRhYmFzZS5yZWYoKVxyXG4gICAgICAgICAgICAuY2hpbGQoXCJ0aW1lc1wiKS5nZXQoKVxyXG4gICAgICAgICAgICAudGhlbigocykgPT4geyBpZiAocy5leGlzdHMoKSkgeyBkYXRhID0gcy52YWwoKSB9fSlcclxuICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4geyBjb25zb2xlLmVycm9yKGVycm9yKSB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm4gZ2V0RGF0YSgpLnRoZW4oKCkgPT4geyBcclxuICAgICAgICAgICAgcmV0dXJuIGRhdGEuZmluZCggKHsgaWQgfSkgPT4geyByZXR1cm4gaWQgPT09IHBhcmFtZXRyfSkgO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59Il19